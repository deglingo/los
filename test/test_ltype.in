/* -*- c -*- */

header {
##include "los/ltype.h"

  static LType _type = 0;
}

data { LType type; }

setup { 
  l_type_init();
  /* [FIXME] not good to use global vars */
  if (_type == 0) {
    LTypeInfo info;
    info.instance_size = 40; /* ? */
    _type = l_type_register("FakeType", 0, &info);
  }
  data->type = _type;
}

teardown { }

test { PIF_CHECK(data->type > 0); }
test { void *obj = l_type_instantiate(data->type); PIF_CHECK(obj); }
