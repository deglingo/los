/* -*- c -*- */

header {
##include "los/lstring.h"
##include <string.h>
}

test { 
  LString *s = l_string_new("test-string", -1);
  PIF_CHECK(s);
  PIF_CHECK_EQ(s->len, 11);
  PIF_CHECK_EQ_STR(s->str, "test-string");
  L_OBJECT_CLEAR(s);
}

test {
  LString *s = l_string_new("test-string", 8);
  PIF_CHECK(s);
  PIF_CHECK_EQ(s->len, 8);
  PIF_CHECK_EQ_STR(s->str, "test-str");
  L_OBJECT_CLEAR(s);
}

test {
  LString *s = l_string_new("a\x00b", 3);
  PIF_CHECK(s);
  PIF_CHECK_EQ(s->len, 3);
  PIF_CHECK(!strncmp(s->str, "a\x00b", 3));
  L_OBJECT_CLEAR(s);
}
